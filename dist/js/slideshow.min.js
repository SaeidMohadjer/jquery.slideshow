function Slideshow(e){function i(){if(_=N.find(".prev"),y=N.find(".next"),T=N.find(".slides"),0===T.length)return void console.warn("slideshow has no markup");if("relative"!==T.css("position"))return void console.warn("slideshow styles are not loaded!");if(N.addClass("loading"),x.preload_images&&T.find("img").length){if("function"!=typeof jQuery.fn.imagesLoaded)return void t();T.imagesLoaded(function(){t()})}else t()}function t(){if(window.MutationObserver&&!N.is(":visible")){var e=new MutationObserver(function(i){i.forEach(function(i){N.is(":visible")&&(e.disconnect(),n())})}),i={attributes:!0,subtree:!0};e.observe($("body").get(0),i)}else n()}function n(){N.removeClass("loading"),x.autoplay&&s(),x.loop&&c(),r(),I.div=T.find(".slide"),I.count=I.div.length,N.has(".slideTabs")&&a(),p(),$(window).on("resize.slideshow",l),l(),k.isInitialized=!0}function s(){x.loop=!0,M=window.setTimeout(function(){E=window.setInterval(function(){v("next")},x.displayTime)},x.autoplay_start_delay)}function o(){x.autoplay&&(x.autoplay=!1,window.clearInterval(E),window.clearTimeout(M))}function a(){var e=N.find(".slideTabs");if(0===e.children().length)for(var i=x.loop?I.count-2:I.count/x.visibleSlidesCount,t=0;t<i;t++)e.append('<a href="#"></a>');e.on("click","a",function(e){e.preventDefault(),o(),q=x.visibleSlidesCount>1?$(this).index()*x.visibleSlidesCount+1:$(this).index()+1,h(x.loop?q:q-1)})}function l(e){if(window.MutationObserver&&!N.is(":visible")){$(window).off("resize.slideshow");var i=new MutationObserver(function(e){e.forEach(function(e){N.is(":visible")&&(i.disconnect(),$(window).on("resize.slideshow",l),d())})}),t={attributes:!0,subtree:!0};i.observe($("body").get(0),t)}else d()}function d(){var e=N.find("> .wrapper");e.addClass("calculating"),k.width=e.width(),e.removeClass("calculating"),x.multiple_slides?x.visibleSlidesCount>1&&I.div.width(u()):I.div.width(k.width),f(),h(x.loop?q:q-1,0),x.variableHeight&&b()}function u(){var e=x.visibleSlidesCount,i=N.find(".wrapper").width(),t=(e-1)*x.slide_margin_right,n=(100-t)/e,s=parseInt(i*n/100),o=parseInt(i*x.slide_margin_right/100);return N.find(".slide").width(s).css("margin-right",o),s}function r(){N.on("click",".prev, .next",function(e){if(e.preventDefault(),!$(this).hasClass("disabled")){o();v($(this).hasClass("next")?"next":"previous")}})}function c(){var e=T.find(".slide").first().clone().addClass("fake post_last"),i=T.find(".slide").last().clone().addClass("fake pre_first");T.append(e).prepend(i)}function v(e){var i=x.visibleSlidesCount;"next"==e?x.loop?q<I.count-1?q++:(T.css({left:-I.div.eq(1).position().left}),q=2):q<I.count&&(q+=i):x.loop?q>0?q--:(T.css({left:-I.div.eq(I.count-2).position().left}),q=I.count-3):q>i&&(q-=i),h(x.loop?q:q-1)}function f(){var e=0,i=parseInt(I.div.css("margin-right"))||0;T.width(5e4);for(var t=0;t<I.count;t++)e=e+I.div.eq(t).outerWidth()+i,U=e;T.width(U)}function h(e,i){var t=void 0===i?x.transition_delay:i,n=I.div.eq(e),s=n.position().left,o=n.position().left+n.width()/2,a=k.width/2;x.multiple_slides&&"center"===x.align&&(o>a?o<U-a?s-=(k.width-n.width())/2:s=U-k.width:s=0),g(),D=e-1,I.div.removeClass("currentSlide"),n.addClass("currentSlide"),T.stop(!0,!1).animate({left:-s},t,x.easing,function(){x.variableHeight&&0==H&&b(),x.callback&&x.callback(k)})}function p(){var e,i,t=I.div;t.bind(TouchMouseEvent.DOWN,function(t){t.preventDefault(),e=t.pageX,i=e}),t.bind(TouchMouseEvent.MOVE,function(e){e.preventDefault(),i=e.pageX}),t.bind(TouchMouseEvent.UP,function(n){n.preventDefault();var s=t.index($(this));x.autoplay&&o(),i<e?y.hasClass("disabled")||v("next"):i>e?_.hasClass("disabled")||v("previous"):"thumb_nails"===x.mode&&s!=q&&(q=s,f())})}function b(){$(O+" .wrapper").css("height",m()),x.align_buttons()}function m(){var e=x.loop?q:q-1;return 1===x.visibleSlidesCount?$(O+" .slide").eq(e).outerHeight():function(){var e=0;return N.find(".slide").each(function(){var i=$(this).outerHeight();i>e&&(e=i)}),H=e,e}()}function g(){0==I.count&&(q=0),q==I.count-1&&x.loop?$(O+" .slideNumber").text("1"):0==q&&x.loop?$(O+" .slideNumber").text(I.count-2):$(O+" .slideNumber").text(q),N.has(".slideTabs")&&w(),x.loop||C(),$(O+" .slidesCount").text(x.loop?I.count-2:I.count)}function w(){var e=$(O+" .slideTabs a");e.removeClass("selected"),x.loop?q==I.count-1?e.eq(0).addClass("selected"):0==q?e.eq(I.count-3).addClass("selected"):e.eq(q-1).addClass("selected"):e.eq(Math.ceil(q/x.visibleSlidesCount)-1).addClass("selected")}function C(){1==x.visibleSlidesCount?q==I.count&&1==q?(_.addClass("disabled"),y.addClass("disabled")):q==I.count?(_.removeClass("disabled"),y.addClass("disabled")):1==q?(_.addClass("disabled"),y.removeClass("disabled")):(_.removeClass("disabled"),y.removeClass("disabled")):q>I.count-x.visibleSlidesCount?(_.removeClass("disabled"),y.addClass("disabled")):q<x.visibleSlidesCount?(_.addClass("disabled"),y.removeClass("disabled")):(_.removeClass("disabled"),y.removeClass("disabled"))}var _,y,T,E,M,S={align:"left",mode:"default",autoplay:!1,autoplay_start_delay:0,callback:null,displayTime:3e3,easing:"swing",id:null,startingSlideNumber:1,visibleSlidesCount:1,slideTab_has_value:!1,transition_delay:500,preload_images:!1,loop:!1,variableHeight:!1,multiple_slides:!1,slide_margin_right:0,align_buttons:function(){var e=N.find(".next").height();N.find(".prev, .next").css("top",(m()-e)/2)}},x=$.extend(!0,S,e),k=this,O="#"+x.id,N=$(O),q=x.startingSlideNumber,D=0,I={},U=0,H=0,z=x.json||N.data("json");templateUri=x.template||N.data("template"),this.isInitialized=!1,this.width=0,this.slideNumber=function(e){if(!e)return q;q=e,g(),h(x.loop?q:q-1)},this.getSlideCount=function(){return I.count},z?function(e){function i(){var i=t(s);N.html(i),e()}var t,n=!1,s={};$.getJSON(z,function(e){n=!0,s.slides=e}).error(function(e,i,t){console.warn(i,t)}),$.ajax({url:templateUri,dataType:"html",success:function(e){t=Handlebars.compile(e),n&&i()},error:function(e,i,t){console.warn(i,t)}})}(i):i()}!function(){TouchMouseEvent={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"};var e=function(e){var i;switch(e.type){case"mousedown":i=TouchMouseEvent.DOWN;break;case"mouseup":i=TouchMouseEvent.UP;break;case"mousemove":i=TouchMouseEvent.MOVE;break;default:return}var n=t(i,e,e.pageX,e.pageY);$(e.target).trigger(n)},i=function(e){var i;switch(e.type){case"touchstart":i=TouchMouseEvent.DOWN;break;case"touchend":i=TouchMouseEvent.UP;break;case"touchmove":i=TouchMouseEvent.MOVE;break;default:return}var n,s=e.originalEvent.touches[0];n=i==TouchMouseEvent.UP?t(i,e,null,null):t(i,e,s.pageX,s.pageY),$(e.target).trigger(n)},t=function(e,i,t,n){return $.Event(e,{pageX:t,pageY:n,originalEvent:i})},n=$(document);"ontouchstart"in window?(n.on("touchstart",i),n.on("touchmove",i),n.on("touchend",i)):(n.on("mousedown",e),n.on("mouseup",e),n.on("mousemove",e))}();